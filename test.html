<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tennis Grand Slam Analysis Dashboard - Enhanced</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    max-width: 1600px;
    margin: 0 auto;
    padding: 20px;
    line-height: 1.6;
    background: linear-gradient(135deg, #f8fff8 0%, #f0fff0 50%, #fff8f0 100%);
    min-height: 100vh;
  }
    .container {
      background-color: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      margin-bottom: 30px;
      overflow: hidden;
      border: 2px solid #9ACD32;
    }
    h1 {
      color: #2c3e50;
      text-align: center;
      margin-bottom: 10px;
      font-size: 2.5em;
      font-weight: 300;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    h2 {
      color: #9ACD32;
      border-bottom: 3px solid #FF8C00;
      padding-bottom: 10px;
      font-size: 1.8em;
    }
    .description {
      background: linear-gradient(135deg, #f0fff0 0%, #e6ffe6 100%);
      padding: 25px;
      border-radius: 10px;
      margin-bottom: 25px;
      border-left: 5px solid #9ACD32;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .dataset-info {
      background-color: #e9ecef;
      padding: 15px;
      border-radius: 5px;
      margin: 10px 0;
    }
    .highlight {
      font-weight: bold;
      color: #FF8C00;
    }
    .chart-container {
      position: relative;
      height: 500px;
      margin: 20px 0;
    }
    .chart-container-temp {
      position: relative;
      height: 750px;
      margin: 20px 0;
    }
  #vis {
    width: 100%;
    height: 800px;
    overflow: hidden;
    border-radius: 8px;
    background-color: white;
  }
    #vis svg {
      max-width: 100%;
      height: auto;
    }
    #vegaChart {
      width: 100%;
      height: 450px;
      background-color: white;
    }
    #temperatureChart {
      width: 100%;
      height: 850px;
      background-color: white;
      overflow: visible;
    }
    .slider-container {
      margin: 20px 0;
      padding: 20px;
      background: linear-gradient(135deg, #f0fff0 0%, #e6ffe6 100%);
      border-radius: 10px;
      border: 2px solid #9ACD32;
    }
    .slider {
      width: 100%;
      height: 6px;
      border-radius: 5px;
      background: #ddd;
      outline: none;
      -webkit-appearance: none;
    }
    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #FF8C00;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    .slider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #FF8C00;
      cursor: pointer;
      border: none;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    .custom-legend {
      margin-top: 20px;
      padding: 15px;
      background: linear-gradient(135deg, #f0fff0 0%, #e6ffe6 100%);
      border-radius: 10px;
      border: 2px solid #9ACD32;
    }
    .slider-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
      font-size: 12px;
      color: #666;
    }
    .stats {
      display: flex;
      justify-content: space-around;
      margin: 20px 0;
      padding: 20px;
      background: linear-gradient(135deg, #9ACD32 0%, #FF8C00 100%);
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(154, 205, 50, 0.3);
    }
    .stat-item {
      text-align: center;
    }
    .stat-number {
      font-size: 24px;
      font-weight: bold;
      color: white;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }
    .stat-label {
      font-size: 14px;
      color: white;
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéæ Tennis Grand Slam Analysis Dashboard</h1>
    <p style="text-align: center; color: #7f8c8d; font-style: italic; margin-bottom: 30px;">Enhanced visualization with Grand Slam tournament locations and historical analysis</p>
    
    <h2>üåç Global Distribution of Tennis Players & Grand Slam Locations</h2>
    <div class="description">
      <p><strong>The Global Tennis Story:</strong> This map tells the story of tennis around the world. Some countries are tennis powerhouses, producing hundreds of professional players, while others have barely any. The darker areas show where tennis has taken root and flourished - these are the nations that dominate the sport.</p>
      
      <p><strong>Surprising Discoveries:</strong> You might expect tennis to be most popular in wealthy countries, but the data reveals some surprises. Some smaller nations punch well above their weight in tennis, while some large countries have surprisingly few players. This map shows us which nations have truly embraced tennis culture.</p>
      
      <p><strong>The Grand Slam Connection:</strong> The four tournament locations tell another story - tennis's global reach. From the <span class="highlight">Australian Open</span> in Melbourne to <span class="highlight">Wimbledon</span> in London, <span class="highlight">Roland Garros</span> in Paris, and the <span class="highlight">US Open</span> in New York, these tournaments span four continents. This isn't just coincidence - it reflects tennis's journey from a British garden game to a truly global sport.</p>
      
      <p><strong>Australia's Tennis Legacy:</strong> Australia stands out on this map, not just as a host nation, but as a country that has produced some of tennis's greatest champions. From Rod Laver to Margaret Court, Australia has been a tennis superpower, and the <span class="highlight">Australian Open</span> continues this legacy every January.</p>
    </div>
    <div id="vis"></div>
  </div>

  <div class="container">
    <h2>üìà Tennis Player Birth Years: Evolution of Tennis Popularity</h2>
    <div class="description">
      <p><strong>The Tennis Revolution:</strong> This chart reveals one of sport's greatest success stories. In the 1800s, tennis was a niche pastime for the wealthy. By the 2000s, it had become a global phenomenon with thousands of new players every year. The dramatic growth tells the story of how tennis transformed from a garden party game to a professional sport watched by millions.</p>
      
      <p><strong>Three Defining Periods:</strong> The data reveals three distinct chapters in tennis history. The <span class="highlight">Classic Era</span> shows tennis in its infancy - a handful of players in the 1800s. The <span class="highlight">Transition Era</span> captures tennis's gradual spread as courts appeared in more places. The <span class="highlight">Modern Era</span> shows the explosion - when tennis became a mass participation sport with professional opportunities for thousands.</p>
      
      <p><strong>The 1968 Revolution:</strong> The orange line marks the most important moment in tennis history - the <span class="highlight">Open Era</span>. Before 1968, tennis was split between amateurs and professionals who couldn't compete together. This artificial barrier kept the sport small and limited. When it was removed, tennis exploded. The bars after 1968 tell the story of a sport finally free to reach its potential.</p>
      
      <p><strong>What the Numbers Reveal:</strong> The most striking finding is the scale of growth. In the 1800s, you could count tennis players on your fingers. By the 1990s, thousands of players were being born each year. This isn't just about more people - it's about tennis becoming accessible, professional, and truly global. Use the slider to explore this incredible transformation year by year.</p>
    </div>
    
    <div class="slider-container">
      <label for="vegaYearSlider">Birth Year Range: <span id="vegaYearRange">1834 - 2005</span></label>
      <input type="range" id="vegaYearSlider" class="slider" min="1834" max="2005" value="2005" step="1">
      <div class="slider-labels">
        <span>1834</span>
        <span>2005</span>
      </div>
    </div>

    <div class="stats">
      <div class="stat-item">
        <div class="stat-number">88,748</div>
        <div class="stat-label">Total Players</div>
      </div>
      <div class="stat-item">
        <div class="stat-number" id="vegaFilteredPlayers">88,748</div>
        <div class="stat-label">Filtered Players</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">1994</div>
        <div class="stat-label">Peak Year</div>
      </div>
    </div>

    <div class="chart-container">
      <div id="vegaChart"></div>
    </div>
    
    <div class="custom-legend">
      <h4 style="text-align: center; color: #9ACD32; margin-bottom: 10px;">Tennis Era</h4>
      <div style="display: flex; justify-content: center; gap: 20px; align-items: center;">
        <div style="display: flex; align-items: center; gap: 5px;">
          <div style="width: 12px; height: 12px; background-color: #9ACD32; border-radius: 50%;"></div>
          <span style="font-size: 12px;">Classic Era</span>
        </div>
        <div style="display: flex; align-items: center; gap: 5px;">
          <div style="width: 12px; height: 12px; background-color: #32CD32; border-radius: 50%;"></div>
          <span style="font-size: 12px;">Transition Era</span>
        </div>
        <div style="display: flex; align-items: center; gap: 5px;">
          <div style="width: 12px; height: 12px; background-color: #FF8C00; border-radius: 50%;"></div>
          <span style="font-size: 12px;">Modern Era</span>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <h2>üå°Ô∏è Grand Slam Tournament Temperatures: The Climate Challenge (2016-2024)</h2>
    <div class="description">
      <p><strong>The Four Climate Stories:</strong> This chart reveals the dramatically different weather conditions during each Grand Slam tournament period. From Melbourne's scorching heat during the Australian Open to London's unpredictable weather during Wimbledon, each tournament presents unique climate challenges that test players in completely different ways.</p>
      
      <p><strong>Temperature Extremes:</strong> The data shows the Australian Open (red line) consistently experiences the hottest conditions during its tournament period, often exceeding 25¬∞C. Wimbledon (purple) tends to be the coolest during its tournament period, while the French Open (blue) and US Open (orange) fall somewhere in between. This temperature variation explains why some players excel at certain tournaments while struggling at others.</p>
      
      <p><strong>The Heat Threshold:</strong> The orange dashed line marks 25¬∞C - the point where conditions become extremely challenging for players. Notice how the Australian Open frequently crosses this threshold during its tournament period, while Wimbledon rarely does. This explains why heat tolerance and conditioning are crucial for Australian Open success.</p>
      
      <p><strong>Year-to-Year Variations:</strong> Each tournament shows significant temperature fluctuations from year to year during their respective tournament periods. A cool year at the Australian Open might be easier than a hot year at the US Open. This unpredictability adds another layer of strategy - players must adapt their preparation and tactics based on the specific weather conditions they'll face during each Grand Slam.</p>
    </div>
    
    <div class="chart-container-temp">
      <div id="temperatureChart"></div>
    </div>
  </div>

  <script type="text/javascript">
    // Load the enhanced map visualization with legend
    vegaEmbed('#vis', 'map-with-legend.json', {
      actions: false,
      renderer: 'svg'
    }).then(function(result) {
      console.log('Enhanced map with legend loaded successfully');
    }).catch(console.error);
    
    // Load the enhanced birth year chart
    vegaEmbed('#vegaChart', 'birth-year-real-data.json', {
      actions: false,
      renderer: 'svg'
    }).then(function(result) {
      console.log('Enhanced birth year chart loaded successfully');
      
      // Add slider functionality
      const slider = document.getElementById('vegaYearSlider');
      const rangeDisplay = document.getElementById('vegaYearRange');
      const filteredPlayersDisplay = document.getElementById('vegaFilteredPlayers');
      
      // Store the original data
      let originalData = null;
      
      function updateChart() {
        const maxYear = parseInt(slider.value);
        rangeDisplay.textContent = `1834 - ${maxYear}`;
        
        // Get original data if not stored yet
        if (!originalData) {
          originalData = result.view.data('source_0');
        }
        
        // Filter the original data
        const filteredData = originalData.filter(d => d.year <= maxYear);
        const totalFiltered = filteredData.reduce((sum, d) => sum + d.count, 0);
        filteredPlayersDisplay.textContent = totalFiltered.toLocaleString();
        
        // Update the chart with filtered data
        result.view.change('source_0', vega.changeset().remove(vega.truthy).insert(filteredData)).run();
      }
      
      slider.addEventListener('input', updateChart);
      updateChart(); // Initial update
    }).catch(console.error);
    
    // Load the Grand Slam temperatures chart
    vegaEmbed('#temperatureChart', 'grand-slam-temperatures.json', {
      actions: false,
      renderer: 'svg'
    }).then(function(result) {
      console.log('Grand Slam temperatures chart loaded successfully');
    }).catch(console.error);
  </script>
</body>
</html>