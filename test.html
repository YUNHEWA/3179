<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tennis Grand Slam Analysis Dashboard - Enhanced</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    max-width: 1600px;
    margin: 0 auto;
    padding: 20px;
    line-height: 1.6;
    background: linear-gradient(135deg, #f8fff8 0%, #f0fff0 50%, #fff8f0 100%);
    min-height: 100vh;
  }
    .container {
      background-color: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      margin-bottom: 20px;
      overflow: hidden;
      border: 2px solid #9ACD32;
    }
    h1 {
      color: #2c3e50;
      text-align: center;
      margin-bottom: 10px;
      font-size: 2.5em;
      font-weight: 300;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    h2 {
      color: #9ACD32;
      border-bottom: 3px solid #FF8C00;
      padding-bottom: 10px;
      font-size: 1.8em;
    }
    .description {
      background: linear-gradient(135deg, #f0fff0 0%, #e6ffe6 100%);
      padding: 18px;
      border-radius: 10px;
      margin-bottom: 15px;
      border-left: 5px solid #9ACD32;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .description p {
      margin: 10px 0;
    }
    .chart-layout {
      display: flex;
      gap: 30px;
      align-items: flex-start;
    }
    .chart-layout .description {
      flex: 0 0 400px;
      margin-bottom: 0;
      font-size: 14px;
      line-height: 1.8;
    }
    .chart-layout .description p {
      max-width: 400px;
      text-align: justify;
    }
    .chart-layout .chart-wrapper {
      flex: 1;
      min-width: 0;
    }
    .dataset-info {
      background-color: #e9ecef;
      padding: 15px;
      border-radius: 5px;
      margin: 10px 0;
    }
    .highlight {
      font-weight: bold;
      color: #FF8C00;
    }
    .chart-container {
      position: relative;
      height: 500px;
      margin: 10px 0;
    }
    .chart-container-temp {
      position: relative;
      height: 750px;
      margin: 10px 0;
    }
    .player-showcase {
      display: flex;
      gap: 15px;
      margin: 20px 0;
      flex-wrap: wrap;
      justify-content: center;
    }
    .player-card {
      position: relative;
      width: 180px;
      height: 240px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.3s ease;
      cursor: pointer;
      border: 3px solid transparent;
    }
    .player-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 12px 30px rgba(0,0,0,0.4);
    }
    .player-card.active {
      border: 3px solid #9ACD32;
      box-shadow: 0 0 20px rgba(154, 205, 50, 0.6);
    }
    .player-card.inactive {
      opacity: 0.4;
      filter: grayscale(60%);
    }
    .player-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .player-card-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
      padding: 15px 10px 10px;
      color: white;
    }
    .player-card-name {
      font-weight: bold;
      font-size: 14px;
      margin-bottom: 3px;
    }
    .player-card-titles {
      font-size: 12px;
      color: #9ACD32;
    }
  #vis {
    width: 100%;
    height: 800px;
    overflow: hidden;
    border-radius: 8px;
    background-color: white;
  }
    #vis svg {
      max-width: 100%;
      height: auto;
    }
    #vegaChart {
      width: 100%;
      height: 450px;
      background-color: white;
    }
    #temperatureChart {
      width: 100%;
      height: 850px;
      background-color: white;
      overflow: visible;
    }
    .slider-container {
      margin: 20px 0;
      padding: 20px;
      background: linear-gradient(135deg, #f0fff0 0%, #e6ffe6 100%);
      border-radius: 10px;
      border: 2px solid #9ACD32;
    }
    .slider {
      width: 100%;
      height: 6px;
      border-radius: 5px;
      background: #ddd;
      outline: none;
      -webkit-appearance: none;
    }
    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #FF8C00;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    .slider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #FF8C00;
      cursor: pointer;
      border: none;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    .custom-legend {
      margin-top: 20px;
      padding: 15px;
      background: transparent;
      border-radius: 10px;
    }
    .slider-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
      font-size: 12px;
      color: #666;
    }
    .stats {
      display: flex;
      justify-content: space-around;
      margin: 20px 0;
      padding: 20px;
      background: linear-gradient(135deg, #9ACD32 0%, #FF8C00 100%);
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(154, 205, 50, 0.3);
    }
    .stat-item {
      text-align: center;
    }
    .stat-number {
      font-size: 24px;
      font-weight: bold;
      color: white;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }
    .stat-label {
      font-size: 14px;
      color: white;
      opacity: 0.9;
    }
    .header-section {
      text-align: center;
      padding: 40px 20px;
      background: linear-gradient(135deg, #9ACD32 0%, #32CD32 100%);
      border-radius: 15px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(154, 205, 50, 0.3);
    }
    .header-section h1 {
      color: white;
      margin: 0 0 20px 0;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
      font-size: 3em;
    }
    .header-section .subtitle {
      color: white;
      font-size: 1.3em;
      margin-bottom: 30px;
      opacity: 0.95;
    }
    .grand-slam-info {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin-top: 30px;
      flex-wrap: wrap;
      gap: 20px;
    }
    .slam-card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      min-width: 200px;
      transition: transform 0.3s ease;
    }
    .slam-card:hover {
      transform: translateY(-5px);
    }
    .slam-icon {
      font-size: 3em;
      margin-bottom: 10px;
    }
    .slam-name {
      font-weight: bold;
      font-size: 1.1em;
      margin: 10px 0 5px 0;
    }
    .slam-location {
      color: #666;
      font-size: 0.9em;
    }
    .slam-surface {
      color: #9ACD32;
      font-weight: bold;
      margin-top: 5px;
    }
    .tennis-emoji {
      font-size: 2em;
      display: inline-block;
      animation: bounce 2s infinite;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
  </style>
</head>
<body>
  <div class="header-section">
    <h1><span class="tennis-emoji">üéæ</span> Tennis Grand Slam Analysis Dashboard <span class="tennis-emoji">üéæ</span></h1>
    <p class="subtitle">Exploring the World's Most Prestigious Tennis Tournaments</p>
    
    <div class="grand-slam-info">
      <div class="slam-card" style="border-top: 5px solid #e74c3c;">
        <img src="/3179/images/ao_open.png" alt="Australian Open" style="width: 80px; height: 80px; object-fit: contain; margin-bottom: 10px;">
        <div class="slam-name" style="color: #e74c3c;">Australian Open</div>
        <div class="slam-location">Melbourne, Australia</div>
        <div class="slam-surface">Hard Court ‚Ä¢ January</div>
      </div>
      
      <div class="slam-card" style="border-top: 5px solid #3498db;">
        <img src="../images/french_open.png" alt="French Open" style="width: 80px; height: 80px; object-fit: contain; margin-bottom: 10px;">
        <div class="slam-name" style="color: #3498db;">French Open</div>
        <div class="slam-location">Paris, France</div>
        <div class="slam-surface">Clay Court ‚Ä¢ May-June</div>
      </div>
      
      <div class="slam-card" style="border-top: 5px solid #8e44ad;">
        <img src="../images/Wimbledon.png" alt="Wimbledon" style="width: 80px; height: 80px; object-fit: contain; margin-bottom: 10px;">
        <div class="slam-name" style="color: #8e44ad;">Wimbledon</div>
        <div class="slam-location">London, England</div>
        <div class="slam-surface">Grass Court ‚Ä¢ June-July</div>
      </div>
      
      <div class="slam-card" style="border-top: 5px solid #f39c12;">
        <img src="../images/us_open.jpg" alt="US Open" style="width: 80px; height: 80px; object-fit: contain; margin-bottom: 10px;">
        <div class="slam-name" style="color: #f39c12;">US Open</div>
        <div class="slam-location">New York, USA</div>
        <div class="slam-surface">Hard Court ‚Ä¢ August-Sept</div>
      </div>
    </div>
  </div>

  <div class="container">
    
    <h2>üåç Global Distribution of Tennis Players & Grand Slam Locations</h2>
    <div class="chart-layout">
      <div class="description">
        <p><strong>The Global Tennis Story:</strong> This map tells the story of tennis around the world. Some countries are tennis powerhouses, producing hundreds of professional players, while others have barely any. The darker areas show where tennis has taken root and flourished - these are the nations that dominate the sport.</p>
        
        <p><strong>Surprising Discoveries:</strong> You might expect tennis to be most popular in wealthy countries, but the data reveals some surprises. Some smaller nations punch well above their weight in tennis, while some large countries have surprisingly few players. This map shows us which nations have truly embraced tennis culture.</p>
        
        <p><strong>The Grand Slam Connection:</strong> The four tournament locations tell another story - tennis's global reach. From the <span class="highlight">Australian Open</span> in Melbourne to <span class="highlight">Wimbledon</span> in London, <span class="highlight">Roland Garros</span> in Paris, and the <span class="highlight">US Open</span> in New York, these tournaments span four continents. This isn't just coincidence - it reflects tennis's journey from a British garden game to a truly global sport.</p>
        
        <p><strong>Australia's Tennis Legacy:</strong> Australia stands out on this map, not just as a host nation, but as a country that has produced some of tennis's greatest champions. From Rod Laver to Margaret Court, Australia has been a tennis superpower, and the <span class="highlight">Australian Open</span> continues this legacy every January.</p>
      </div>
      <div class="chart-wrapper">
        <div id="vis"></div>
      </div>
    </div>
  </div>

  <div class="container">
    <h2>üìà Tennis Player Birth Years: Evolution of Tennis Popularity</h2>
    <div class="chart-layout">
      <div class="description">
        <p><strong>The Tennis Revolution:</strong> This chart reveals one of sport's greatest success stories. In the 1800s, tennis was a niche pastime for the wealthy. By the 2000s, it had become a global phenomenon with thousands of new players every year. The dramatic growth tells the story of how tennis transformed from a garden party game to a professional sport watched by millions.</p>
        
        <p><strong>Three Defining Periods:</strong> The data reveals three distinct chapters in tennis history. The <span class="highlight">Classic Era</span> shows tennis in its infancy - a handful of players in the 1800s. The <span class="highlight">Transition Era</span> captures tennis's gradual spread as courts appeared in more places. The <span class="highlight">Modern Era</span> shows the explosion - when tennis became a mass participation sport with professional opportunities for thousands.</p>
        
        <p><strong>The 1968 Revolution:</strong> The orange line marks the most important moment in tennis history - the <span class="highlight">Open Era</span>. Before 1968, tennis was split between amateurs and professionals who couldn't compete together. This artificial barrier kept the sport small and limited. When it was removed, tennis exploded. The bars after 1968 tell the story of a sport finally free to reach its potential.</p>
        
        <p><strong>What the Numbers Reveal:</strong> The most striking finding is the scale of growth. In the 1800s, you could count tennis players on your fingers. By the 1990s, thousands of players were being born each year. This isn't just about more people - it's about tennis becoming accessible, professional, and truly global. Use the slider to explore this incredible transformation year by year.</p>
      </div>
      
      <div class="chart-wrapper">
        <div class="slider-container">
          <label for="vegaYearSlider">Birth Year Range: <span id="vegaYearRange">1834 - 2005</span></label>
          <input type="range" id="vegaYearSlider" class="slider" min="1834" max="2005" value="2005" step="1">
          <div class="slider-labels">
            <span>1834</span>
            <span>2005</span>
          </div>
        </div>

        <div class="stats">
          <div class="stat-item">
            <div class="stat-number">88,748</div>
            <div class="stat-label">Total Players</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" id="vegaFilteredPlayers">88,748</div>
            <div class="stat-label">Filtered Players</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">1994</div>
            <div class="stat-label">Peak Year</div>
          </div>
        </div>

        <div class="chart-container">
          <div id="vegaChart"></div>
        </div>
        
        <div class="custom-legend">
          <h4 style="text-align: center; color: #9ACD32; margin-bottom: 10px;">Tennis Era</h4>
          <div style="display: flex; justify-content: center; gap: 20px; align-items: center;">
            <div style="display: flex; align-items: center; gap: 5px;">
              <div style="width: 12px; height: 12px; background-color: #9ACD32; border-radius: 50%;"></div>
              <span style="font-size: 12px;">Classic Era</span>
            </div>
            <div style="display: flex; align-items: center; gap: 5px;">
              <div style="width: 12px; height: 12px; background-color: #32CD32; border-radius: 50%;"></div>
              <span style="font-size: 12px;">Transition Era</span>
            </div>
            <div style="display: flex; align-items: center; gap: 5px;">
              <div style="width: 12px; height: 12px; background-color: #FF8C00; border-radius: 50%;"></div>
              <span style="font-size: 12px;">Modern Era</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <h2>üéæ Left-Handed vs Right-Handed Players: The Lefty Advantage?</h2>
    <div class="chart-layout">
      <div class="description">
        <p><strong>The Lefty Phenomenon:</strong> Only 10% of people are left-handed, yet <span class="highlight">Rafael Nadal alone won 26.5% of all Grand Slam titles from 2005-2025</span> - that's 22 out of 83 titles! One left-handed player won more than a quarter of all major championships.</p>
        
        <p><strong>Why the Advantage?</strong> Most players train against right-handers, making them less familiar with lefty spin, angles, and serve patterns. This unfamiliarity is decisive at the highest levels.</p>
        
        <p><strong>Legendary Lefties:</strong> <span class="highlight">Rafael Nadal</span> (22 Grand Slams), <span class="highlight">Rod Laver</span> (11 - Australia's legend), <span class="highlight">Martina Navratilova</span> (18), and <span class="highlight">John McEnroe</span> (7) all prove the lefty advantage.</p>
      </div>
      
      <div class="chart-wrapper">
        <div class="chart-container">
          <div id="handednessChart"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <h2>‚öñÔ∏è Gender Distribution in Professional Tennis: The Rise of Women's Tennis</h2>
    <div class="chart-layout">
      <div class="description">
        <p><strong>The Gender Gap Story:</strong> Professional tennis has historically been male-dominated, with men making up 62% of all professional players in our dataset. However, this simple statistic hides a remarkable transformation story. When we look at the data decade by decade, we see women's tennis has grown dramatically, especially in recent years.</p>
        
        <p><strong>The Turning Point:</strong> The most striking finding is in the 2000s decade - for the first time in tennis history, <span class="highlight">more female players were born than male players</span> (2,122 females vs 1,345 males). This represents a historic shift, showing that women's tennis has not only caught up but is now leading in terms of new player participation. This is a testament to decades of advocacy for gender equity in sports.</p>
        
        <p><strong>Australian Women's Tennis Legacy:</strong> Australia has been at the forefront of women's tennis. Legends like <span class="highlight">Margaret Court</span> (24 Grand Slams - the most in history), <span class="highlight">Evonne Goolagong Cawley</span> (7 Grand Slams), and <span class="highlight">Ashleigh Barty</span> (3 Grand Slams, retired 2022) have inspired generations. The Australian Open's equal prize money since 2001 has been a powerful statement for gender equality.</p>
        
        <p><strong>The Broader Context:</strong> This growth reflects broader social changes: Title IX in the US (1972), the WTA's founding (1973), equal Grand Slam prize money, and increased media coverage of women's sports. The data shows these efforts are working - women's tennis is thriving and growing faster than men's tennis in the 21st century.</p>
      </div>
      
      <div class="chart-wrapper">
        <div class="chart-container">
          <div id="genderChart"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <h2>üå°Ô∏è Grand Slam Tournament Temperatures: The Climate Challenge (2016-2024)</h2>
    <div class="description">
      <p><strong>The Four Climate Stories:</strong> These charts reveal the dramatically different weather conditions during each Grand Slam tournament period. From Melbourne's scorching heat during the Australian Open to London's unpredictable weather during Wimbledon, each tournament presents unique climate challenges that test players in completely different ways.</p>
      
      <p><strong>Temperature Extremes:</strong> The left chart shows average temperatures over time, while the right chart displays the temperature ranges (high to low). The Australian Open (red) consistently experiences the hottest conditions, with highs often exceeding 30¬∞C and the widest temperature swings. Wimbledon (purple) tends to be the coolest and most stable. The US Open (orange) shows consistently high temperatures with smaller daily variations.</p>
      
      <p><strong>The Heat Threshold:</strong> The orange dashed line marks 25¬∞C - the point where conditions become extremely challenging for players. Notice how the Australian Open frequently crosses this threshold, while Wimbledon rarely does. The temperature ranges show that players in Melbourne must prepare for both hot days and cool mornings/evenings, adding to the physical challenge.</p>
      
      <p><strong>Year-to-Year Variations:</strong> Both charts show significant temperature fluctuations from year to year. The range chart reveals that some tournaments (like the Australian Open) have larger daily temperature swings, requiring players to adapt their clothing and strategy throughout the day. This unpredictability means players must be prepared for diverse conditions at each Grand Slam.</p>
    </div>
    
    <div style="display: flex; gap: 20px; margin-top: 20px;">
      <div style="flex: 1;">
        <h3 style="color: #9ACD32; text-align: center; font-size: 16px;">Average Temperatures</h3>
        <div class="chart-container-temp">
          <div id="temperatureChart"></div>
        </div>
      </div>
      <div style="flex: 1;">
        <h3 style="color: #9ACD32; text-align: center; font-size: 16px;">Temperature Ranges (High-Low)</h3>
        <div class="chart-container-temp">
          <div id="temperatureRangeChart"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <h2>üèÜ Player Performance Analysis: Dominance & Specialization</h2>
    <div style="background: linear-gradient(135deg, #fff8f0 0%, #f0fff0 100%); padding: 12px 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid #FF8C00;">
      <p style="margin: 0; font-size: 14px; color: #2c3e50;"><strong>üí° Interactive Feature:</strong> Click on any player card below to filter both charts and see their individual performance across years and tournaments!</p>
    </div>
    
    <!-- Player Showcase Section -->
    <div style="margin-top: 30px; padding-top: 25px; border-top: 2px dashed #9ACD32;">
      <h3 style="color: #9ACD32; text-align: center; font-size: 1.5em; margin-bottom: 10px;">üåü The Legends of Modern Tennis</h3>
      <p style="text-align: center; color: #666; font-size: 14px; margin-bottom: 15px;">Click on a player to filter all charts by their performance</p>
      <div class="player-showcase">
        <div class="player-card" data-player="Novak Djokovic" onclick="togglePlayerFilter(this)">
          <img src="../images/Novak_Djokovic.png" alt="Novak Djokovic">
          <div class="player-card-overlay">
            <div class="player-card-name">Novak Djokovic</div>
            <div class="player-card-titles">24 Grand Slams ‚Ä¢ 10 AO</div>
          </div>
        </div>
        <div class="player-card" data-player="Rafael Nadal" onclick="togglePlayerFilter(this)">
          <img src="../images/Rafael_Nadal.png" alt="Rafael Nadal">
          <div class="player-card-overlay">
            <div class="player-card-name">Rafael Nadal</div>
            <div class="player-card-titles">22 Grand Slams ‚Ä¢ 14 FO</div>
          </div>
        </div>
        <div class="player-card" data-player="Roger Federer" onclick="togglePlayerFilter(this)">
          <img src="../images/Roger_Federer.png" alt="Roger Federer">
          <div class="player-card-overlay">
            <div class="player-card-name">Roger Federer</div>
            <div class="player-card-titles">20 Grand Slams ‚Ä¢ 8 Wimbledon</div>
          </div>
        </div>
        <div class="player-card" data-player="Carlos Alcaraz" onclick="togglePlayerFilter(this)">
          <img src="../images/Carlos_Alcaraz.png" alt="Carlos Alcaraz">
          <div class="player-card-overlay">
            <div class="player-card-name">Carlos Alcaraz</div>
            <div class="player-card-titles">4 Grand Slams ‚Ä¢ Rising Star</div>
          </div>
        </div>
        <div class="player-card" data-player="Jannik Sinner" onclick="togglePlayerFilter(this)">
          <img src="../images/Jannik_Sinner.png" alt="Jannik Sinner">
          <div class="player-card-overlay">
            <div class="player-card-name">Jannik Sinner</div>
            <div class="player-card-titles">2 Grand Slams ‚Ä¢ 2025 AO</div>
          </div>
        </div>
        <div class="player-card" data-player="Andy Murray" onclick="togglePlayerFilter(this)">
          <img src="../images/Andy_Murray.jpg" alt="Andy Murray">
          <div class="player-card-overlay">
            <div class="player-card-name">Andy Murray</div>
            <div class="player-card-titles">3 Grand Slams ‚Ä¢ 2x Wimbledon</div>
          </div>
        </div>
        <div class="player-card" data-player="Stan Wawrinka" onclick="togglePlayerFilter(this)">
          <img src="../images/Stan_Wawrinka.png" alt="Stan Wawrinka">
          <div class="player-card-overlay">
            <div class="player-card-name">Stan Wawrinka</div>
            <div class="player-card-titles">3 Grand Slams ‚Ä¢ All Different</div>
          </div>
        </div>
      </div>
      <div style="text-align: center; margin-top: 15px;">
        <button onclick="clearPlayerFilter()" style="background: #FF8C00; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: bold; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: all 0.3s ease;">
          Clear Filter
        </button>
      </div>
    </div>
    
    <!-- Grand Slam Dominance Chart -->
    <div style="margin-top: 20px;">
      <h3 style="color: #9ACD32; margin-bottom: 15px; font-size: 1.5em;">üìÖ Grand Slam Dominance Timeline (2005-2025)</h3>
      <div class="chart-layout">
        <div class="description">
          <p><strong>Unprecedented Dominance:</strong> From 2005 to 2025, three players - <span class="highlight">Roger Federer</span>, <span class="highlight">Rafael Nadal</span>, and <span class="highlight">Novak Djokovic</span> - won an astonishing 62 out of 83 Grand Slam titles (74.7%). This heatmap reveals their stranglehold on tennis's biggest tournaments across two decades.</p>
          
          <p><strong>The Pattern of Power:</strong> Each colored cell represents a Grand Slam victory. Notice how the Big Three's colors dominate almost every row. From 2005-2022, they won at least one Grand Slam every single year. The recent emergence of <span class="highlight">Carlos Alcaraz</span> (pink) and <span class="highlight">Jannik Sinner</span> (green) in 2022-2025 signals a changing of the guard.</p>
          
          <p><strong>What This Means:</strong> We've witnessed one of sport's greatest eras. Future generations will study this period as the golden age of men's tennis. The concentration of talent, longevity of excellence, and rivalry between these three champions created an unprecedented spectacle.</p>
        </div>
        
        <div class="chart-wrapper">
          <div class="chart-container">
            <div id="dominanceChart"></div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Shared Player Legend -->
    <div style="margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #f0fff0 0%, #e6ffe6 100%); border-radius: 10px; border: 2px solid #9ACD32;">
      <h4 style="text-align: center; color: #9ACD32; margin-bottom: 15px; font-size: 1.2em;">üèÜ Player Legend</h4>
      <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px;">
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background-color: #3498db; border-radius: 4px;"></div>
          <span style="font-size: 13px; font-weight: 500;">Novak Djokovic</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background-color: #e67e22; border-radius: 4px;"></div>
          <span style="font-size: 13px; font-weight: 500;">Rafael Nadal</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background-color: #8e44ad; border-radius: 4px;"></div>
          <span style="font-size: 13px; font-weight: 500;">Roger Federer</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background-color: #e91e63; border-radius: 4px;"></div>
          <span style="font-size: 13px; font-weight: 500;">Carlos Alcaraz</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background-color: #27ae60; border-radius: 4px;"></div>
          <span style="font-size: 13px; font-weight: 500;">Jannik Sinner</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background-color: #95a5a6; border-radius: 4px;"></div>
          <span style="font-size: 13px; font-weight: 500;">Andy Murray</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background-color: #e74c3c; border-radius: 4px;"></div>
          <span style="font-size: 13px; font-weight: 500;">Stan Wawrinka</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background-color: #2c3e50; border-radius: 4px;"></div>
          <span style="font-size: 13px; font-weight: 500;">Marin ƒåiliƒá</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background-color: #1abc9c; border-radius: 4px;"></div>
          <span style="font-size: 13px; font-weight: 500;">Dominic Thiem</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background-color: #c0392b; border-radius: 4px;"></div>
          <span style="font-size: 13px; font-weight: 500;">Daniil Medvedev</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background-color: #f4d03f; border-radius: 4px;"></div>
          <span style="font-size: 13px; font-weight: 500;">Juan Mart√≠n del Potro</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="width: 20px; height: 20px; background-color: #34495e; border-radius: 4px;"></div>
          <span style="font-size: 13px; font-weight: 500;">Marat Safin</span>
        </div>
      </div>
    </div>
    
    <!-- Tournament Specialization Chart -->
    <div style="margin-top: 30px;">
      <h3 style="color: #9ACD32; margin-bottom: 15px; font-size: 1.5em;">üéØ Tournament Specialization: Masters of Their Domain</h3>
      <div class="chart-layout">
        <div class="description">
          <p><strong>The King of Clay:</strong> <span class="highlight">Rafael Nadal's 14 French Open titles</span> (orange segments) represent the most dominant performance at a single tournament in tennis history. He won 14 out of 21 French Opens (66.7%) from 2005-2025. On clay courts in Paris, Nadal is virtually unbeatable.</p>
          
          <p><strong>Djokovic's Melbourne Fortress:</strong> <span class="highlight">Novak Djokovic's 10 Australian Open titles</span> (blue segments) show his mastery of hard courts and hot conditions. His dominance down under has made the Australian Open his signature tournament, much like Nadal owns the French Open.</p>
          
          <p><strong>Federer's Grass Court Elegance:</strong> <span class="highlight">Roger Federer's 8 Wimbledon titles</span> (purple segments) showcase his graceful style perfectly suited to grass. The All England Club became his second home.</p>
          
          <p><strong>Reading the Chart:</strong> Each vertical bar represents a Grand Slam tournament. The colored segments show which players won titles there. Notice how the French Open bar is dominated by Nadal's orange, while other tournaments show more balance among the Big Three.</p>
        </div>
        
        <div class="chart-wrapper">
          <div class="chart-container">
            <div id="specializationChart"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <h2>üéæ Court Surface Analysis: The Battle of Hard, Clay, and Grass</h2>
    <div style="background: linear-gradient(135deg, #fff8f0 0%, #f0fff0 100%); padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #9ACD32;">
      <p style="margin: 0; font-size: 14px; color: #2c3e50;"><strong>üèüÔ∏è Understanding Court Surfaces:</strong> Each Grand Slam is played on a different surface, which dramatically affects playing style and who wins. Hard courts (blue) favor powerful, aggressive players. Clay courts (orange) reward endurance and defensive skills. Grass courts (green) suit serve-and-volley players with quick reflexes.</p>
    </div>
    
    <div style="display: flex; gap: 30px; margin-bottom: 30px;">
      <div style="flex: 1;">
        <div class="description">
          <p><strong>The Surface Statistics:</strong> From 2005-2025, <span class="highlight">Hard courts produced 42 Grand Slam champions</span> (Australian Open + US Open), making it the most common surface. Clay courts produced 21 champions (French Open only), while Grass courts produced 20 (Wimbledon only). However, the number of unique champions tells a different story.</p>
          
          <p><strong>Hard Court Democracy:</strong> Hard courts saw <span class="highlight">12 different champions</span> - the most diverse! This shows hard courts are more "democratic" and allow different playing styles to succeed. Players like Djokovic (14 titles), Federer (9), and Nadal (6) all won multiple hard court slams.</p>
          
          <p><strong>Clay Court Kingdom:</strong> Clay courts are the most exclusive - only <span class="highlight">5 different champions</span> in 21 years! <span class="highlight">Rafael Nadal won 14 of 21 French Opens</span> (66.7%), making clay his absolute domain. The slow surface and high bounce perfectly suit his topspin-heavy game and incredible endurance.</p>
          
          <p><strong>Grass Court Elite:</strong> Grass courts had <span class="highlight">6 different champions</span>. The fast, low-bouncing surface rewards big servers and aggressive players. Djokovic (7 titles) and Federer (6) dominated Wimbledon's grass, showcasing their versatility across surfaces.</p>
        </div>
      </div>
      
      <div style="flex: 0 0 450px;">
        <div class="chart-container">
          <div id="surfaceDistributionChart"></div>
        </div>
      </div>
    </div>
    
    <div class="chart-layout">
      <div class="description">
        <p><strong>Surface Specialists vs All-Rounders:</strong> This chart reveals who mastered which surfaces. The Big Three show different patterns: <span class="highlight">Nadal is the ultimate clay specialist</span> with 14 French Opens but only 2 Wimbledons. <span class="highlight">Djokovic is the most balanced</span>, winning on all three surfaces with 14 hard court, 7 grass, and 3 clay titles. <span class="highlight">Federer excelled on hard and grass</span> but won only 1 French Open.</p>
        
        <p><strong>The New Generation:</strong> Young stars like <span class="highlight">Carlos Alcaraz</span> show remarkable versatility, already winning on all three surfaces (2 clay, 2 grass, 2 hard). <span class="highlight">Jannik Sinner</span> has dominated hard courts with 3 titles. This suggests the new generation is more adaptable than ever.</p>
        
        <p><strong>Australian Perspective:</strong> For Australian players and fans, understanding surfaces is crucial. Australia's hard courts (similar to the Australian Open) help develop powerful, aggressive players. However, success at all Grand Slams requires mastering all three surfaces - a challenge that makes the Big Three's achievements even more remarkable.</p>
      </div>
      
      <div class="chart-wrapper">
        <div class="chart-container" style="height: 600px;">
          <div id="surfacePerformanceChart"></div>
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript">
    // Global variables for player filtering
    let selectedPlayer = null;
    let chartViews = {};
    
    // Player filter functions
    function togglePlayerFilter(card) {
      const playerName = card.getAttribute('data-player');
      const allCards = document.querySelectorAll('.player-card');
      
      // If clicking the same player, deselect
      if (selectedPlayer === playerName) {
        selectedPlayer = null;
        allCards.forEach(c => {
          c.classList.remove('active', 'inactive');
        });
      } else {
        // Select new player
        selectedPlayer = playerName;
        allCards.forEach(c => {
          if (c.getAttribute('data-player') === playerName) {
            c.classList.add('active');
            c.classList.remove('inactive');
          } else {
            c.classList.add('inactive');
            c.classList.remove('active');
          }
        });
      }
      
      // Apply filter to all charts
      filterCharts();
    }
    
    function clearPlayerFilter() {
      selectedPlayer = null;
      const allCards = document.querySelectorAll('.player-card');
      allCards.forEach(c => {
        c.classList.remove('active', 'inactive');
      });
      filterCharts();
    }
    
    function filterCharts() {
      console.log('Filtering charts for player:', selectedPlayer);
      
      // Filter dominance chart
      if (chartViews.dominance) {
        if (selectedPlayer) {
          const filtered = chartViews.dominanceOriginal.filter(d => d.champion === selectedPlayer);
          console.log('Dominance filtered data:', filtered);
          chartViews.dominance.data('source_0', filtered).run();
        } else {
          chartViews.dominance.data('source_0', chartViews.dominanceOriginal).run();
        }
      }
      
      // Filter specialization chart
      if (chartViews.specialization) {
        if (selectedPlayer) {
          const filtered = chartViews.specializationOriginal.filter(d => d.player === selectedPlayer);
          console.log('Specialization filtered data:', filtered);
          chartViews.specialization.data('source_0', filtered).run();
        } else {
          chartViews.specialization.data('source_0', chartViews.specializationOriginal).run();
        }
      }
      
      // Filter surface performance chart
      if (chartViews.surfacePerformance) {
        if (selectedPlayer) {
          const filtered = chartViews.surfacePerformanceOriginal.filter(d => d.player === selectedPlayer);
          console.log('Surface performance filtered data:', filtered);
          chartViews.surfacePerformance.data('source_0', filtered).run();
        } else {
          chartViews.surfacePerformance.data('source_0', chartViews.surfacePerformanceOriginal).run();
        }
      }
    }
    
    // Load the enhanced map visualization with legend
    vegaEmbed('#vis', 'map-with-legend.json', {
      actions: false,
      renderer: 'svg'
    }).then(function(result) {
      console.log('Enhanced map with legend loaded successfully');
    }).catch(console.error);
    
    // Load the enhanced birth year chart
    vegaEmbed('#vegaChart', 'birth-year-real-data.json', {
      actions: false,
      renderer: 'svg'
    }).then(function(result) {
      console.log('Enhanced birth year chart loaded successfully');
      
      // Add slider functionality
      const slider = document.getElementById('vegaYearSlider');
      const rangeDisplay = document.getElementById('vegaYearRange');
      const filteredPlayersDisplay = document.getElementById('vegaFilteredPlayers');
      
      // Store the original data
      let originalData = null;
      
      function updateChart() {
        const maxYear = parseInt(slider.value);
        rangeDisplay.textContent = `1834 - ${maxYear}`;
        
        // Get original data if not stored yet
        if (!originalData) {
          originalData = result.view.data('source_0');
        }
        
        // Filter the original data
        const filteredData = originalData.filter(d => d.year <= maxYear);
        const totalFiltered = filteredData.reduce((sum, d) => sum + d.count, 0);
        filteredPlayersDisplay.textContent = totalFiltered.toLocaleString();
        
        // Update the chart with filtered data
        result.view.change('source_0', vega.changeset().remove(vega.truthy).insert(filteredData)).run();
      }
      
      slider.addEventListener('input', updateChart);
      updateChart(); // Initial update
    }).catch(console.error);
    
    // Load the Grand Slam temperatures chart
    vegaEmbed('#temperatureChart', 'grand-slam-temperatures.json', {
      actions: false,
      renderer: 'svg'
    }).then(function(result) {
      console.log('Grand Slam temperatures chart loaded successfully');
    }).catch(console.error);
    
    // Load the temperature ranges chart
    vegaEmbed('#temperatureRangeChart', 'temperature-ranges.json?v=' + Date.now(), {
      actions: false,
      renderer: 'svg'
    }).then(function(result) {
      console.log('Temperature ranges chart loaded successfully');
    }).catch(function(error) {
      console.error('Error loading temperature ranges chart:', error);
    });
    
    // Load the handedness bar chart
    vegaEmbed('#handednessChart', 'handedness-analysis.json?v=' + Date.now(), {
      actions: false,
      renderer: 'svg'
    }).then(function(result) {
      console.log('Handedness bar chart loaded successfully');
    }).catch(function(error) {
      console.error('Error loading handedness chart:', error);
    });
    
    // Load the enhanced gender distribution chart
    vegaEmbed('#genderChart', 'gender-distribution-enhanced.json?v=' + Date.now(), {
      actions: false,
      renderer: 'svg'
    }).then(function(result) {
      console.log('Enhanced gender distribution chart loaded successfully');
    }).catch(function(error) {
      console.error('Error loading gender chart:', error);
    });
    
    // Load the Grand Slam dominance heatmap
    vegaEmbed('#dominanceChart', 'grand-slam-dominance.json?v=' + Date.now(), {
      actions: false,
      renderer: 'svg'
    }).then(function(result) {
      console.log('Grand Slam dominance chart loaded successfully');
      chartViews.dominance = result.view;
      chartViews.dominanceOriginal = result.view.data('source_0').slice();
    }).catch(function(error) {
      console.error('Error loading dominance chart:', error);
    });
    
    // Load the tournament specialization bar chart (better for filtering)
    vegaEmbed('#specializationChart', 'tournament-specialization-bar.json?v=' + Date.now(), {
      actions: false,
      renderer: 'svg'
    }).then(function(result) {
      console.log('Tournament specialization bar chart loaded successfully');
      chartViews.specialization = result.view;
      chartViews.specializationOriginal = result.view.data('source_0').slice();
    }).catch(function(error) {
      console.error('Error loading specialization chart:', error);
    });
    
    // Load the surface distribution donut chart
    vegaEmbed('#surfaceDistributionChart', 'surface-distribution.json?v=' + Date.now(), {
      actions: false,
      renderer: 'svg'
    }).then(function(result) {
      console.log('Surface distribution chart loaded successfully');
    }).catch(function(error) {
      console.error('Error loading surface distribution chart:', error);
    });
    
    // Load the surface performance heatmap
    vegaEmbed('#surfacePerformanceChart', 'surface-performance-heatmap.json?v=' + Date.now(), {
      actions: false,
      renderer: 'svg'
    }).then(function(result) {
      console.log('Surface performance heatmap loaded successfully');
      chartViews.surfacePerformance = result.view;
      chartViews.surfacePerformanceOriginal = result.view.data('source_0').slice();
    }).catch(function(error) {
      console.error('Error loading surface performance chart:', error);
    });
  </script>

  <!-- Data Sources Section -->
  <div class="container" style="margin-top: 30px; padding: 20px; background: #f9f9f9;">
    <h3 style="color: #9ACD32; margin-bottom: 15px; font-size: 1.1em;">üìä Data Sources</h3>
    
    <div style="font-size: 13px; line-height: 1.6; color: #666;">
      <p style="margin: 5px 0;"><strong>Player Data:</strong> <a href="https://www.kaggle.com/datasets/taylorbrownlow/atpwta-tennis-data" target="_blank" style="color: #3498db;">Kaggle ATP/WTA Tennis Database</a></p>
      
      <p style="margin: 5px 0;"><strong>Temperature Data:</strong> <a href="https://www.extremeweatherwatch.com" target="_blank" style="color: #e67e22;">Extreme Weather Watch</a> (Melbourne, Paris, London, New York)</p>
      
      <p style="margin: 5px 0;"><strong>Champion Data:</strong> 
        <a href="https://ausopen.com/history/honour-roll/mens-singles" target="_blank" style="color: #9ACD32;">Australian Open</a>, 
        <a href="https://en.wikipedia.org/wiki/List_of_French_Open_men%27s_singles_champions" target="_blank" style="color: #9ACD32;">French Open</a>, 
        <a href="https://en.wikipedia.org/wiki/List_of_Wimbledon_gentlemen%27s_singles_champions" target="_blank" style="color: #9ACD32;">Wimbledon</a>, 
        <a href="https://en.wikipedia.org/wiki/List_of_US_Open_men%27s_singles_champions" target="_blank" style="color: #9ACD32;">US Open</a>
      </p>
    </div>
  </div>

</body>
</html>